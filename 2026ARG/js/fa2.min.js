/**
 * Bundled by jsDelivr using Rollup v2.79.2 and Terser v5.39.0.
 * Original file: /npm/graphology-layout-forceatlas2@0.10.1/index.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import t from"/npm/graphology-utils@2.5.2/is-graph/+esm";import e from"/npm/graphology-utils@2.5.2/getters/+esm";var o=10,a={};a.assign=function(t){t=t||{};var e,o,a,n=Array.prototype.slice.call(arguments).slice(1);for(e=0,a=n.length;e<a;e++)if(n[e])for(o in n[e])t[o]=n[e][o];return t},a.validateSettings=function(t){return"linLogMode"in t&&"boolean"!=typeof t.linLogMode?{message:"the `linLogMode` setting should be a boolean."}:"outboundAttractionDistribution"in t&&"boolean"!=typeof t.outboundAttractionDistribution?{message:"the `outboundAttractionDistribution` setting should be a boolean."}:"adjustSizes"in t&&"boolean"!=typeof t.adjustSizes?{message:"the `adjustSizes` setting should be a boolean."}:"edgeWeightInfluence"in t&&"number"!=typeof t.edgeWeightInfluence?{message:"the `edgeWeightInfluence` setting should be a number."}:!("scalingRatio"in t)||"number"==typeof t.scalingRatio&&t.scalingRatio>=0?"strongGravityMode"in t&&"boolean"!=typeof t.strongGravityMode?{message:"the `strongGravityMode` setting should be a boolean."}:!("gravity"in t)||"number"==typeof t.gravity&&t.gravity>=0?"slowDown"in t&&!("number"==typeof t.slowDown||t.slowDown>=0)?{message:"the `slowDown` setting should be a number >= 0."}:"barnesHutOptimize"in t&&"boolean"!=typeof t.barnesHutOptimize?{message:"the `barnesHutOptimize` setting should be a boolean."}:!("barnesHutTheta"in t)||"number"==typeof t.barnesHutTheta&&t.barnesHutTheta>=0?null:{message:"the `barnesHutTheta` setting should be a number >= 0."}:{message:"the `gravity` setting should be a number >= 0."}:{message:"the `scalingRatio` setting should be a number >= 0."}},a.graphToByteArrays=function(t,e){var o,a=t.order,n=t.size,r={},i=new Float32Array(10*a),s=new Float32Array(3*n);return o=0,t.forEachNode((function(t,e){r[t]=o,i[o]=e.x,i[o+1]=e.y,i[o+2]=0,i[o+3]=0,i[o+4]=0,i[o+5]=0,i[o+6]=1,i[o+7]=1,i[o+8]=e.size||1,i[o+9]=e.fixed?1:0,o+=10})),o=0,t.forEachEdge((function(t,a,n,u,g,l,h){var f=r[n],b=r[u],d=e(t,a,n,u,g,l,h);i[f+6]+=d,i[b+6]+=d,s[o]=f,s[o+1]=b,s[o+2]=d,o+=3})),{nodes:i,edges:s}},a.assignLayoutChanges=function(t,e,o){var a=0;t.updateEachNodeAttributes((function(t,n){return n.x=e[a],n.y=e[a+1],a+=10,o?o(t,n):n}))},a.readGraphPositions=function(t,e){var o=0;t.forEachNode((function(t,a){e[o]=a.x,e[o+1]=a.y,o+=10}))},a.collectLayoutChanges=function(t,e,o){for(var a=t.nodes(),n={},r=0,i=0,s=e.length;r<s;r+=10){if(o){var u=Object.assign({},t.getNodeAttributes(a[i]));u.x=e[r],u.y=e[r+1],u=o(a[i],u),n[a[i]]={x:u.x,y:u.y}}else n[a[i]]={x:e[r],y:e[r+1]};i++}return n},a.createWorker=function(t){var e=window.URL||window.webkitURL,o=t.toString(),a=e.createObjectURL(new Blob(["("+o+").call(this);"],{type:"text/javascript"})),n=new Worker(a);return e.revokeObjectURL(a),n};var n=t,r=e.createEdgeWeightGetter,i=function(t,e,a){var n,r,i,s,u,g,l,h,f,b,d,c,y,p,M,w,m,v,D,A,q,R,z,H=e.length,L=a.length,x=t.adjustSizes,E=t.barnesHutTheta*t.barnesHutTheta,O=[];for(i=0;i<H;i+=o)e[i+4]=e[i+2],e[i+5]=e[i+3],e[i+2]=0,e[i+3]=0;if(t.outboundAttractionDistribution){for(d=0,i=0;i<H;i+=o)d+=e[i+6];d/=H/o}if(t.barnesHutOptimize){var W,j,k,S=1/0,T=-1/0,G=1/0,I=-1/0;for(i=0;i<H;i+=o)S=Math.min(S,e[i+0]),T=Math.max(T,e[i+0]),G=Math.min(G,e[i+1]),I=Math.max(I,e[i+1]);var C=T-S,N=I-G;for(C>N?I=(G-=(C-N)/2)+C:T=(S-=(N-C)/2)+N,O[0]=-1,O[1]=(S+T)/2,O[2]=(G+I)/2,O[3]=Math.max(T-S,I-G),O[4]=-1,O[5]=-1,O[6]=0,O[7]=0,O[8]=0,n=1,i=0;i<H;i+=o)for(r=0,k=3;;){if(!(O[r+5]>=0)){if(O[r+0]<0){O[r+0]=i;break}if(O[r+5]=9*n,h=O[r+3]/2,O[(f=O[r+5])+0]=-1,O[f+1]=O[r+1]-h,O[f+2]=O[r+2]-h,O[f+3]=h,O[f+4]=f+9,O[f+5]=-1,O[f+6]=0,O[f+7]=0,O[f+8]=0,O[(f+=9)+0]=-1,O[f+1]=O[r+1]-h,O[f+2]=O[r+2]+h,O[f+3]=h,O[f+4]=f+9,O[f+5]=-1,O[f+6]=0,O[f+7]=0,O[f+8]=0,O[(f+=9)+0]=-1,O[f+1]=O[r+1]+h,O[f+2]=O[r+2]-h,O[f+3]=h,O[f+4]=f+9,O[f+5]=-1,O[f+6]=0,O[f+7]=0,O[f+8]=0,O[(f+=9)+0]=-1,O[f+1]=O[r+1]+h,O[f+2]=O[r+2]+h,O[f+3]=h,O[f+4]=O[r+4],O[f+5]=-1,O[f+6]=0,O[f+7]=0,O[f+8]=0,n+=4,W=e[O[r+0]+0]<O[r+1]?e[O[r+0]+1]<O[r+2]?O[r+5]:O[r+5]+9:e[O[r+0]+1]<O[r+2]?O[r+5]+18:O[r+5]+27,O[r+6]=e[O[r+0]+6],O[r+7]=e[O[r+0]+0],O[r+8]=e[O[r+0]+1],O[W+0]=O[r+0],O[r+0]=-1,W===(j=e[i+0]<O[r+1]?e[i+1]<O[r+2]?O[r+5]:O[r+5]+9:e[i+1]<O[r+2]?O[r+5]+18:O[r+5]+27)){if(k--){r=W;continue}k=3;break}O[j+0]=i;break}W=e[i+0]<O[r+1]?e[i+1]<O[r+2]?O[r+5]:O[r+5]+9:e[i+1]<O[r+2]?O[r+5]+18:O[r+5]+27,O[r+7]=(O[r+7]*O[r+6]+e[i+0]*e[i+6])/(O[r+6]+e[i+6]),O[r+8]=(O[r+8]*O[r+6]+e[i+1]*e[i+6])/(O[r+6]+e[i+6]),O[r+6]+=e[i+6],r=W}}if(t.barnesHutOptimize){for(c=t.scalingRatio,i=0;i<H;i+=o)for(r=0;;)if(O[r+5]>=0){if(w=Math.pow(e[i+0]-O[r+7],2)+Math.pow(e[i+1]-O[r+8],2),4*(b=O[r+3])*b/w<E){if(y=e[i+0]-O[r+7],p=e[i+1]-O[r+8],!0===x?w>0?(m=c*e[i+6]*O[r+6]/w,e[i+2]+=y*m,e[i+3]+=p*m):w<0&&(m=-c*e[i+6]*O[r+6]/Math.sqrt(w),e[i+2]+=y*m,e[i+3]+=p*m):w>0&&(m=c*e[i+6]*O[r+6]/w,e[i+2]+=y*m,e[i+3]+=p*m),(r=O[r+4])<0)break;continue}r=O[r+5]}else if((g=O[r+0])>=0&&g!==i&&(w=(y=e[i+0]-e[g+0])*y+(p=e[i+1]-e[g+1])*p,!0===x?w>0?(m=c*e[i+6]*e[g+6]/w,e[i+2]+=y*m,e[i+3]+=p*m):w<0&&(m=-c*e[i+6]*e[g+6]/Math.sqrt(w),e[i+2]+=y*m,e[i+3]+=p*m):w>0&&(m=c*e[i+6]*e[g+6]/w,e[i+2]+=y*m,e[i+3]+=p*m)),(r=O[r+4])<0)break}else for(c=t.scalingRatio,s=0;s<H;s+=o)for(u=0;u<s;u+=o)y=e[s+0]-e[u+0],p=e[s+1]-e[u+1],!0===x?(w=Math.sqrt(y*y+p*p)-e[s+8]-e[u+8])>0?(m=c*e[s+6]*e[u+6]/w/w,e[s+2]+=y*m,e[s+3]+=p*m,e[u+2]-=y*m,e[u+3]-=p*m):w<0&&(m=100*c*e[s+6]*e[u+6],e[s+2]+=y*m,e[s+3]+=p*m,e[u+2]-=y*m,e[u+3]-=p*m):(w=Math.sqrt(y*y+p*p))>0&&(m=c*e[s+6]*e[u+6]/w/w,e[s+2]+=y*m,e[s+3]+=p*m,e[u+2]-=y*m,e[u+3]-=p*m);for(f=t.gravity/t.scalingRatio,c=t.scalingRatio,i=0;i<H;i+=o)m=0,y=e[i+0],p=e[i+1],w=Math.sqrt(Math.pow(y,2)+Math.pow(p,2)),t.strongGravityMode?w>0&&(m=c*e[i+6]*f):w>0&&(m=c*e[i+6]*f/w),e[i+2]-=y*m,e[i+3]-=p*m;for(c=1*(t.outboundAttractionDistribution?d:1),l=0;l<L;l+=3)s=a[l+0],u=a[l+1],h=a[l+2],M=Math.pow(h,t.edgeWeightInfluence),y=e[s+0]-e[u+0],p=e[s+1]-e[u+1],!0===x?(w=Math.sqrt(y*y+p*p)-e[s+8]-e[u+8],t.linLogMode?t.outboundAttractionDistribution?w>0&&(m=-c*M*Math.log(1+w)/w/e[s+6]):w>0&&(m=-c*M*Math.log(1+w)/w):t.outboundAttractionDistribution?w>0&&(m=-c*M/e[s+6]):w>0&&(m=-c*M)):(w=Math.sqrt(Math.pow(y,2)+Math.pow(p,2)),t.linLogMode?t.outboundAttractionDistribution?w>0&&(m=-c*M*Math.log(1+w)/w/e[s+6]):w>0&&(m=-c*M*Math.log(1+w)/w):t.outboundAttractionDistribution?(w=1,m=-c*M/e[s+6]):(w=1,m=-c*M)),w>0&&(e[s+2]+=y*m,e[s+3]+=p*m,e[u+2]-=y*m,e[u+3]-=p*m);if(!0===x)for(i=0;i<H;i+=o)1!==e[i+9]&&((v=Math.sqrt(Math.pow(e[i+2],2)+Math.pow(e[i+3],2)))>10&&(e[i+2]=10*e[i+2]/v,e[i+3]=10*e[i+3]/v),D=e[i+6]*Math.sqrt((e[i+4]-e[i+2])*(e[i+4]-e[i+2])+(e[i+5]-e[i+3])*(e[i+5]-e[i+3])),A=Math.sqrt((e[i+4]+e[i+2])*(e[i+4]+e[i+2])+(e[i+5]+e[i+3])*(e[i+5]+e[i+3]))/2,q=.1*Math.log(1+A)/(1+Math.sqrt(D)),R=e[i+0]+e[i+2]*(q/t.slowDown),e[i+0]=R,z=e[i+1]+e[i+3]*(q/t.slowDown),e[i+1]=z);else for(i=0;i<H;i+=o)1!==e[i+9]&&(D=e[i+6]*Math.sqrt((e[i+4]-e[i+2])*(e[i+4]-e[i+2])+(e[i+5]-e[i+3])*(e[i+5]-e[i+3])),A=Math.sqrt((e[i+4]+e[i+2])*(e[i+4]+e[i+2])+(e[i+5]+e[i+3])*(e[i+5]+e[i+3]))/2,q=e[i+7]*Math.log(1+A)/(1+Math.sqrt(D)),e[i+7]=Math.min(1,Math.sqrt(q*(Math.pow(e[i+2],2)+Math.pow(e[i+3],2))/(1+Math.sqrt(D)))),R=e[i+0]+e[i+2]*(q/t.slowDown),e[i+0]=R,z=e[i+1]+e[i+3]*(q/t.slowDown),e[i+1]=z);return{}},s=a,u={linLogMode:!1,outboundAttractionDistribution:!1,adjustSizes:!1,edgeWeightInfluence:1,scalingRatio:1,strongGravityMode:!1,gravity:1,slowDown:1,barnesHutOptimize:!1,barnesHutTheta:.5};function g(t,e,o){if(!n(e))throw new Error("graphology-layout-forceatlas2: the given graph is not a valid graphology instance.");"number"==typeof o&&(o={iterations:o});var a=o.iterations;if("number"!=typeof a)throw new Error("graphology-layout-forceatlas2: invalid number of iterations.");if(a<=0)throw new Error("graphology-layout-forceatlas2: you should provide a positive number of iterations.");var g=r("getEdgeWeight"in o?o.getEdgeWeight:"weight").fromEntry,l="function"==typeof o.outputReducer?o.outputReducer:null,h=s.assign({},u,o.settings),f=s.validateSettings(h);if(f)throw new Error("graphology-layout-forceatlas2: "+f.message);var b,d=s.graphToByteArrays(e,g);for(b=0;b<a;b++)i(h,d.nodes,d.edges);if(!t)return s.collectLayoutChanges(e,d.nodes);s.assignLayoutChanges(e,d.nodes,l)}var l=g.bind(null,!1);l.assign=g.bind(null,!0),l.inferSettings=function(t){var e="number"==typeof t?t:t.order;return{barnesHutOptimize:e>2e3,strongGravityMode:!0,gravity:.05,scalingRatio:10,slowDown:1+Math.log(e)}};var h=l;export{h as default};
//# sourceMappingURL=/sm/766ec8f26bee1d62443ff38d89fe765936b1ec01399979ca899c57fa70eb323f.map